# Verification Plan

This Verification Plan documents what testing methods we intend of using and how we will be verifying the functionality of the 2 AHB peripherals: GPIO and VGA.

</br>

## Verification Outline

We can break down in 4 main parts how the GPIO and VGA will be tested and verified:

- Formal Verification
- Directed Testing
- Constrained Random Testing (CRT)
- Top-Level Testing

</br>

## What are the purposes of these tests?

### <u> Formal Verification </u>

Using JasperGold and property assertions, we will formally prove that block properties are functional.

### <u> Directed Testing </u>

Directed testing will be used to test the edge cases of each block and the top-level functionality of the integrated system.

### <u> Constrained Random Testing (CRT)</u>

Another form of testing consists of injecting randomly generated data and output configurations to verify and confirm that our blocks work as intended.
In order to successfully apply CRT to our blocks, it would require us implement multiple extra components to get this testing method working:

- **Generator**
  - Generates valid packets to feed into DUT and Model
  - It instantiates "**transaction**" packets
- **Transaction**
  - Define pin level activity generated by Generator
- **Driver**
  - The Driver then drives the transactions from the generator as inputs into the DUT.
- **DUT [ Design under Test]**
  - Instantiates the block we wish to test
- **Monitor**
  - analyse output of DUT
  - associates output to input
- **Scoreboard**
  - Compares Model to DUT outputs
    - Verify that input generates expected output and scores passing tests

Below is visual representation of what we intend to implement:

![](CRT_testing.JPG)

### <u> Top-Level </u>

This testing ensures the overall functionality of the peripherals within the integrated system.

</br>

## How will the peripherals be verified ?

## GPIO

For the GPIO, as it is a rather "simple" block, we have identified that directly testing its different states against the GPIO spec datasheet provided would be the most efficient. This would include verifying the following features:

- Appropriate direction change of gpio_dir [15:0] depending on read or write functionality.
- Verify that data is read/written into the expected Input/Output Register.
- Input/Output of GPIO is stable.
- Verify Parity generation and checking if it works as expected.

> **Formal Verification** </br>
> When doing formal verification on the GPIO, it will analyze the design for all possible states of the peripheral (as specified in the specification) and check if the assertions can be violated. For example, we need to verify that when the direction register is set to output/input, the output should consistantly hold its expected behaviour for any sequence of input.</br> [Refer to AHBGPIO_assertions.sv to access implementation of GPIO's formal verification]

> **CRT** </br>
> In the case of the GPIO, CRT provides a more robust verification of the implementation of the block. We will test that all the property assertions hold as before (from Formal Verification) as well as for invalid control signals.

> **Directed and Top-Level Testing** </br>
> We should also verify that the GPIO works within the integrated system by feeding in directed inputs. Either by itself or in conjunction with other peripherals.

## VGA

VGA has significantly more states, thus we suspect that Formal verification will most likely have a difficult time converging. Furthermore, as a single input into the VGA could propagate into thousands of cycles, we will have to perform analysis on a frame by frame basis to verify that after a certain sequence of inputs, we get the correct sequence of pixels forming an expected frame. As VGA is a more "complex" block, we will most likely need to rely on other complex verification methods such as CRT. The following VGA features will require verification:

- Console text/Image Buffer: verify text display operation
- Ensure that logic contained within the VGA drives the RGB[7:0], HSYNC and VSYNC signals at the correct times to display the characters at the correct place on the display.
- Verify expected functionality of the Dual Lock-Step Configuration of VGA Peripheral

> **Formal Verification** </br>
> We will be testing the timing constraints listed in the specification. Front porch, Sync pulse, Back porch, etc for both horizontal and vertical.

> **CRT and Directed Testing** </br>
> Random/Non-Random characters with both random and non random positions will be fed into the VGA to test its functionality of outputting to the text region of the VGA monitor. </br>
> The edge cases will be a character on the top left of the screen, a character on the bottom right of the screen and characters filling the entire region. There will also be a mix of valid/invalid inputs, random positions, characters, etc with an ideal model to compare the ideal behavior of the VGA

> **Top-Level Testing and Directed Testing** </br>
> In the case of VGA, Top-level and Directed Testing test whether the block works as inteded when combined with the entire system. We will feed it directed test inputs with some being only for the VGA and some in conjunction with other peripherals.
